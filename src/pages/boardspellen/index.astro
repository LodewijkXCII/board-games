---
import Layout from "../../layouts/layout.astro";
import AllGames from "../../components/allGames.astro";
---

<Layout title="Board Games!" discription="Zijn echt heel leuk">
  <AllGames />
</Layout>

<script>
  const toggleSwitch = document.getElementById("playedFilter");
  const gameList = document.querySelectorAll(".board-game-item");
  const searchBox = document.getElementById("search");

  toggleSwitch.addEventListener("click", () => {
    if (toggleSwitch.checked) {
      gameList.forEach((game) => {
        if (game.dataset.played === "true") {
          game.classList.add("visualy-hidden");
        }
      });
    } else {
      gameList.forEach((game) => {
        if (game.dataset.played === "true") {
          game.classList.remove("visualy-hidden");
        }
      });
    }
  });

  searchBox.addEventListener("input", (e) => {
    const searchValue = e.target.value.toLowerCase();

    [...gameList].forEach((game) => {
      const gameName = game.dataset.name.toLowerCase();

      if (gameName.includes(searchValue)) {
        game.classList.remove("visualy-hidden");
        return;
      } else {
        game.classList.add("visualy-hidden");
      }
    });
  });
</script>
